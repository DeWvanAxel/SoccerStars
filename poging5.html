<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>hello phaser!</title>
        <script src="phaser.min.js"></script>

    </head>
    <body>

    <script type="text/javascript">



  var config = {
    type: Phaser.AUTO,
    width: 1200,
    height: 800,
    physics: {
        default: 'matter',
        matter: {
            gravity: { y: 0 },
            debug: true
        }
    },
    scene: {
        preload: preload,
        create: create,
        update: update
    }
    };

    var game = new Phaser.Game(config);

function preload() {
    console.log("preload");
    this.load.image('soepino', 'sprites/soepino.png');
    this.load.image('ambrosius', 'sprites/ambrosius.png');
    this.load.image('football', 'sprites/football.png');

    this.load.image('topwall', 'sprites/tb.png');
    this.load.image('bottomwall', 'sprites/tb.png');
    this.load.image('leftwall', 'sprites/lr.png');
    this.load.image('rightwall', 'sprites/lr.png');
    this.load.image('leftgoal', 'sprites/goal.png');
    this.load.image('rightgoal', 'sprites/goal.png');

    //game.load.image('disk', 'sprites/soepino.png');

}

function createBalls(playerballs, image, amountBalls,game,xOf, yOf) {
    for (var i = 0; i < amountBalls; i++) {
        playerball = game.matter.add.image(xOf[i],yOf[i], image).setBody({type:"circle", radius:37});
        playerball.setBounce(0.7).setFrictionAir(0.0175);
        playerballs.push(playerball);
    }
    return playerballs
}

function shoot(playerballs, playerNumber, angle, speed){
    console.log(playerballs[playerNumber]);
    if (speed > 15) {
        speed = 15
    }
    if (speed < 0) {
        speed = 0.1
    }
    x = Math.cos(angle * Math.PI/180) * speed;
    y = Math.sin(angle * Math.PI/180) * speed;
    playerballs[playerNumber].setVelocity(x,y);
}

var ball1;
var ball2;
var disk;

function create() {

    this.matter.world.setBounds();
    console.log("in create");

    // CREATE WORLD
    topwall = this.matter.add.image(600,75, 'topwall').setStatic(true);
    lefttopwall = this.matter.add.image(125,200, 'leftwall').setStatic(true);
    righttopwall = this.matter.add.image(1075,200, 'rightwall').setStatic(true);
    leftbottomwall = this.matter.add.image(125,600, 'leftwall').setStatic(true);
    rightbottomwall = this.matter.add.image(1075,600, 'rightwall').setStatic(true);
    bottomwall = this.matter.add.image(600,725, 'bottomwall').setStatic(true);
    leftgoal = this.matter.add.image(112,400, 'leftgoal').setStatic(true);
    rightgoal = this.matter.add.image(1088,400, 'rightgoal').setStatic(true);

    // CREATE PLAYERS
    ball = this.matter.add.image(600,400, 'football').setBody({type:"circle", radius:20});

    var player1balls = Array(); 
    var xOf1 = [525,375,375,200,200];
    var yOf1 = [400,275,525,325,475];
    player1balls = createBalls(player1balls, 'soepino', 5, this, xOf1, yOf1);

    var player2balls = Array();
    var xOf2 = [675,825,825,1000,1000];
    var yOf2 = [400,275,525,325,475];
    player2balls = createBalls(player2balls, 'ambrosius', 5, this, xOf2, yOf2);

    shoot(player2balls, 1, 45, 900);    


    this.matter.world.on("collisionstart", checkForGoals);

}

function update () {


    //game.physics.arcade.collide(ball1, disk);
    //game.physics.arcade.collide(ball2, disk);
    
}

 function checkForGoals(pairs){
    console.log(pairs);
    //if(object1.body.collisionFilter.category == goals){
    //    console.log("GOOOOOAAAAAAL!!!");
    //}


}

    </script>

    </body>
</html>